# Database Schema (PostgreSQL DDL)

```sql
-- Create a table for public user profiles linked to auth.users
CREATE TABLE public.user_profiles (
  id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  email TEXT,
  PRIMARY KEY (id)
);
-- NOTE: Trigger to populate this table on new user signup is required.

-- Create a custom ENUM type for assignment status
CREATE TYPE public.assignment_status AS ENUM ('incomplete', 'complete');

-- Create the classes and assignments tables
CREATE TABLE public.classes (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  user_id UUID NOT NULL REFERENCES public.user_profiles(id) ON DELETE CASCADE,
  name TEXT NOT NULL
);

CREATE TABLE public.assignments (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  user_id UUID NOT NULL REFERENCES public.user_profiles(id) ON DELETE CASCADE,
  class_id BIGINT NOT NULL REFERENCES public.classes(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  due_date TIMESTAMPTZ,
  status public.assignment_status DEFAULT 'incomplete'
);

-- NOTE: Additional tables for plans/sub-tasks and full RLS policies are required.
-- The DDL provided in the conversation is a more complete reference.
```